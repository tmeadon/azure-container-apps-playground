@page "/"

<h1>Hello, world!</h1>

Welcome to your new app.

<p>
Data retrieved from backend:

<ul>
    @if (Data == null)
    {
        <p><em>Loading...</em></p>
    }
    else
    {
        @foreach (var item in Data)
        {
            <li>@item</li>
        }
    }
</ul>
</p>

@code {

    public IEnumerable<string> Data;

    protected override async Task OnInitializedAsync()
    {
        var daprClient = new DaprClientBuilder().Build();
        var request = daprClient.CreateInvokeMethodRequest(HttpMethod.Get, "backend", "");
        var response = await daprClient.InvokeMethodWithResponseAsync(request);
        Data = await response.Content.ReadFromJsonAsync<IEnumerable<string>>();
    }
}
